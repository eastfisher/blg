<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>My Blogs - 极速搭建个人博客环境</title>

      
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://eastfisher.github.io/blg/atom.xml">
      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;site.css">
          
      

      
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?29971f31a53cc2ca313719de9914d280";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>

    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">My Blogs</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg">My Blogs</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#gai-shu" class="toc-link">概述</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#gong-neng" class="toc-link">功能</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#xuan-xing" class="toc-link">选型</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#liu-cheng" class="toc-link">流程</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#zolachuang-jian-bo-ke-cang-ku" class="toc-link">zola创建博客仓库</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#an-zhuang-zhu-ti" class="toc-link">安装主题</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#zhi-chi-wen-zhang-ping-lun" class="toc-link">支持文章评论</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#zai-githubbu-shu-bo-ke" class="toc-link">在Github部署博客</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#ri-chang-bian-ji" class="toc-link">日常编辑</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#bian-ji-qi" class="toc-link">编辑器</a>
                    
                </li>
                
                <li>
                    <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#zong-jie" class="toc-link">总结</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#you-dian" class="toc-link">优点</a>
                        </li>
                        
                        <li>
                            <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#qi-ta-tips" class="toc-link">其他tips</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/#can-kao-zi-liao" class="toc-link">参考资料</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;build-your-own-blog-site-rapidly&#x2F;">极速搭建个人博客环境</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2021-02-15</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>本文提供了一种 <strong>极速</strong> <strong>零门槛</strong> 搭建舒适的个人博客开发环境的方法.</p>
<span id="continue-reading"></span><h2 id="gai-shu">概述</h2>
<h3 id="gong-neng">功能</h3>
<ul>
<li>静态博客</li>
<li>支持评论</li>
<li>支持文章标签</li>
<li>支持版本控制</li>
<li>Markdown编写</li>
<li>第三方托管</li>
</ul>
<h3 id="xuan-xing">选型</h3>
<ul>
<li>zola: Rust编写的静态网站生成器, 支持功能较为丰富</li>
<li>utterances: 基于Github Issue的博客评论插件</li>
<li>github pages: Github静态网站托管服务</li>
<li>VS Code Markdown插件: Markdown All in One + Markdown Preview Enhanced</li>
</ul>
<h2 id="liu-cheng">流程</h2>
<h3 id="zolachuang-jian-bo-ke-cang-ku">zola创建博客仓库</h3>
<p>在github上创建一个权限为public的个人仓库, 将其clone到本地.</p>
<p>在本地安装zola, mac推荐使用brew安装: <code>brew install zola</code>.</p>
<p>安装完成后, 在个人仓库中执行 <code>zola init</code> 初始化zola. 需要注意, zola必须在空目录下才能init成功, 如果仓库中包含README.md, 则会init失败. 这时, 需要在其他目录执行zola init后, 把这些文件再移动到个人仓库中.</p>
<p>init成功后的目录结构如下所示:</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#96b5b4;">.
</span><span style="color:#bf616a;">├──</span><span style="color:#c0c5ce;"> config.toml </span><span style="color:#65737e;"># zola配置文件
</span><span style="color:#c0c5ce;">├── content </span><span style="color:#65737e;"># 博文md文件
</span><span style="color:#c0c5ce;">├── sass </span><span style="color:#65737e;"># CSS扩展
</span><span style="color:#c0c5ce;">├── static </span><span style="color:#65737e;"># 全局静态资源
</span><span style="color:#c0c5ce;">├── templates </span><span style="color:#65737e;"># 模板文件
</span><span style="color:#c0c5ce;">└── themes </span><span style="color:#65737e;"># zola主题
</span></code></pre>
<p>这时执行 <code>zola serve</code> , 应该就可以在<code>http://127.0.0.1:1111</code>看到zola默认欢迎页了.</p>
<p>注意, 生成的静态html文件位于 <code>public</code> 目录下, 需要将该目录添加到.gitignore中, 避免提交到git仓库.</p>
<h3 id="an-zhuang-zhu-ti">安装主题</h3>
<p>作为博客系统, 我们希望页面简洁, 功能完备即可. zola提供了一些自带的和第三方的主题 (<a href="https://www.getzola.org/themes/">点击查看</a>), 经过筛选, 我们选择了自带的even主题.</p>
<p>zola的主题的安装过程非常简单: 将主题仓库作为submodule放到themes文件夹, 然后在config.toml中进行配置即可.</p>
<p>安装主题命令:</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#96b5b4;">cd</span><span style="color:#c0c5ce;"> themes
</span><span style="color:#bf616a;">git</span><span style="color:#c0c5ce;"> submodule add https://github.com/getzola/even themes/even
</span></code></pre>
<p>even主题自带 <code>目录</code> 和 <code>标签</code> 功能. 只需要在config.toml中进行配置, 改动如下:</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#bf616a;">theme</span><span style="color:#c0c5ce;"> = &quot;</span><span style="color:#a3be8c;">even</span><span style="color:#c0c5ce;">&quot;
</span><span style="color:#65737e;"># theme = &quot;anpu&quot;
</span><span style="color:#c0c5ce;">taxonomies = [
    { </span><span style="color:#bf616a;">name</span><span style="color:#c0c5ce;"> = &quot;</span><span style="color:#a3be8c;">categories</span><span style="color:#c0c5ce;">&quot;, rss = true },
    { </span><span style="color:#bf616a;">name</span><span style="color:#c0c5ce;"> = &quot;</span><span style="color:#a3be8c;">tags</span><span style="color:#c0c5ce;">&quot;, rss = true },
</span><span style="color:#bf616a;">]

[extra]
even_title</span><span style="color:#c0c5ce;"> = &quot;</span><span style="color:#a3be8c;">My Blogs</span><span style="color:#c0c5ce;">&quot; </span><span style="color:#65737e;"># 主页左上角的名称
</span><span style="color:#c0c5ce;">even_menu = [
    </span><span style="color:#bf616a;">{url</span><span style="color:#c0c5ce;"> = &quot;$</span><span style="color:#bf616a;">BASE_URL</span><span style="color:#c0c5ce;">&quot;, name = &quot;</span><span style="color:#a3be8c;">Home</span><span style="color:#c0c5ce;">&quot;}</span><span style="color:#bf616a;">,
    {url</span><span style="color:#c0c5ce;"> = &quot;$</span><span style="color:#bf616a;">BASE_URL</span><span style="color:#a3be8c;">/categories</span><span style="color:#c0c5ce;">&quot;, name = &quot;</span><span style="color:#a3be8c;">Categories</span><span style="color:#c0c5ce;">&quot;}</span><span style="color:#bf616a;">,
    {url</span><span style="color:#c0c5ce;"> = &quot;$</span><span style="color:#bf616a;">BASE_URL</span><span style="color:#a3be8c;">/tags</span><span style="color:#c0c5ce;">&quot;, name = &quot;</span><span style="color:#a3be8c;">Tags</span><span style="color:#c0c5ce;">&quot;}</span><span style="color:#bf616a;">,
    {url</span><span style="color:#c0c5ce;"> = &quot;$</span><span style="color:#bf616a;">BASE_URL</span><span style="color:#a3be8c;">/about</span><span style="color:#c0c5ce;">&quot;, name = &quot;</span><span style="color:#a3be8c;">About</span><span style="color:#c0c5ce;">&quot;}</span><span style="color:#bf616a;">,
]
</span></code></pre>
<p>even主题对文章的目录结构有一定的限制, 建议使用以下目录结构:</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#96b5b4;">.
</span><span style="color:#bf616a;">├──</span><span style="color:#c0c5ce;"> 2021-02-15_testing </span><span style="color:#65737e;"># 一篇博文的目录, 以日期作为前缀, zola可自动识别并进行排序
</span><span style="color:#c0c5ce;">│   ├── index.md </span><span style="color:#65737e;"># 博文内容
</span><span style="color:#c0c5ce;">│   └── icon.png </span><span style="color:#65737e;"># 博文相关图片等资源也放在同一目录下, 不要放在static目录中
</span><span style="color:#c0c5ce;">├── _index.md </span><span style="color:#65737e;"># content section元数据
</span><span style="color:#c0c5ce;">└── pages
    </span><span style="color:#bf616a;">├──</span><span style="color:#c0c5ce;"> _index.md </span><span style="color:#65737e;"># pages section元数据
</span><span style="color:#c0c5ce;">    └── about.md </span><span style="color:#65737e;"># about页面内容
</span></code></pre>
<p>_index.md用于设置section的元数据 (<a href="https://www.getzola.org/documentation/content/section/">点击查看</a>), 对even主题来说, 配置基本的date排序规则和分页即可保证功能正常使用.</p>
<p><code>2021-02-15_testing</code> 目录是我们创建的用于测试的一篇博文.</p>
<h3 id="zhi-chi-wen-zhang-ping-lun">支持文章评论</h3>
<p>经过基本的调研, 我们选择utterances作为文章评论插件.</p>
<p>utterances是一个基于Github Issue的评论插件, 每篇文章对应一个Issue评论区, Issue中的Comment即作为文章的评论. 通过OAuth, 登录Github账号即可对文章进行评论.</p>
<p>even主题默认没有提供文章评论服务, 但zola具备扩展主题的能力 (<a href="https://www.getzola.org/documentation/themes/extending-a-theme/">点击查看</a>), 直接将utterances生成的js代码对page.html的 <code>page_before_footer</code> 块进行扩展即可. 相关改动如下:</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#65737e;"># 创建templates/page.html文件, 加入以下内容
# 以下这段代码是utterances官网生成的
</span><span style="color:#bf616a;">{</span><span style="color:#c0c5ce;">% extends &quot;</span><span style="color:#a3be8c;">even/templates/page.html</span><span style="color:#c0c5ce;">&quot; %}
</span><span style="color:#bf616a;">{</span><span style="color:#c0c5ce;">% block page_before_footer %}
&lt;div </span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">post-comment</span><span style="color:#c0c5ce;">&quot;&gt;
  &lt;script </span><span style="color:#bf616a;">src</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">https://utteranc.es/client.js</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">repo</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">eastfisher/blg</span><span style="color:#c0c5ce;">&quot; </span><span style="color:#65737e;"># 这里改成你的{github用户名}/{github仓库名}
    </span><span style="color:#bf616a;">issue-term</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">pathname</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">label</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">Comment</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">theme</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">github-light</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">crossorigin</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">anonymous</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">async</span><span style="color:#c0c5ce;">&gt;
  &lt;/script&gt;
&lt;/div&gt;
{% endblock page_before_footer %}
</span></code></pre>
<p>至此, 我们的博客已经基本搭建好了. 在本地再次执行 <code>zola serve</code> 看一看效果.</p>
<h3 id="zai-githubbu-shu-bo-ke">在Github部署博客</h3>
<p>本地搭建好博客框架, 编辑博文内容后, 我们还需要将其托管到第三方服务, 使之能够在网上被其他人浏览. 我们选择在Github部署博客.</p>
<p>这一步我们需要做两件事: 使用Github Pages托管博客, 以及使用Github Action自动部署博客.</p>
<p>zola文档中有部署到Github Pages的相关说明 (<a href="https://www.getzola.org/documentation/deployment/github-pages/">点击查看</a>), 在此就不细说了, 按照文档操作即可, 没什么坑. 注意使用仓库的gh-pages分支作为Github Pages构建分支, 构建目录为根目录.</p>
<p><img src="https://eastfisher.github.io/blg/build-your-own-blog-site-rapidly/gh-pages-setting.png" alt="gh-pages-setting.png" /></p>
<p>这一步完成后, 我们将以上的所有改动, 通过 <code>git push</code> 推送到远程仓库, 等待Github Action执行成功后, 通过以下路径访问博客主页: <code>{github用户名}.github.io/{github仓库名}</code>.</p>
<p>至此, 一个托管到github的静态博客网站就搭建成功了.</p>
<h3 id="ri-chang-bian-ji">日常编辑</h3>
<p>博客框架搭好了, 日常编辑就很简单了. 对于无其他资源的博客, 可以直接在content目录下创建 <code>YYYY-mm-dd_文章名.md</code> 文件, 然后开始写. 对有其他资源的博客, 则在content目录下创建 <code>YYYY-mm-dd_文章名</code> 目录, 在目录中创建 <code>index.md</code> 文件, 然后开始写. 非常easy.</p>
<h2 id="bian-ji-qi">编辑器</h2>
<p>zola渲染的源文件是markdown格式, 需要选择一款趁手的markdown编辑器. 专用编辑器有MacDown, MWeb, 全功能编辑器有Sublime Text, Atom, VS Code等, 这里选择我常用的VS Code作为MD编辑器.</p>
<p>打开VS Code, 在Extentions搜索Markdown, 可以找到 <code>Markdown All in One</code> 和 <code>Markdown Preview Enhanced</code> 这两个插件, 安装之.</p>
<p><code>Markdown All in One</code>用于支持全功能MD编辑, 如语法高亮, 智能检查等. <code>MPE</code>则主要用其进行实时渲染.</p>
<h2 id="zong-jie">总结</h2>
<h3 id="you-dian">优点</h3>
<p>相比于第三方博客服务, 这一套技术栈的优点有以下几点:</p>
<ul>
<li>完全免费, 容量无限</li>
<li>基于git的强大版本控制能力</li>
<li>标准Markdown的所有优点 (所想即所得, 编辑器随便选)</li>
<li>zola本地调试方便, 主题丰富, 可灵活扩展</li>
<li>零成本部署</li>
</ul>
<h3 id="qi-ta-tips">其他tips</h3>
<ul>
<li>如果不使用github作为托管服务, 那么评论服务插件也需要更换.</li>
<li>MWeb的快捷键比VS Code+插件更加易用, 可以考虑使用.</li>
</ul>
<h2 id="can-kao-zi-liao">参考资料</h2>
<ul>
<li>本文配置的博客对应代码仓库: <a href="https://github.com/eastfisher/blg">https://github.com/eastfisher/blg</a></li>
<li><a href="https://www.getzola.org/">https://www.getzola.org/</a></li>
<li><a href="https://utteranc.es/">https://utteranc.es/</a></li>
<li><a href="https://pages.github.com/">https://pages.github.com/</a></li>
</ul>

    </div>

    
<div class="post-comment">
  <script src="https://utteranc.es/client.js"
    repo="eastfisher/blg"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</div>


    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;tags&#x2F;general&#x2F;">#General</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;testing&#x2F;">‹ Testing</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;temporal-in-action-1&#x2F;">Temporal实战 (1) 简介 ›</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      

          <script type="text/javascript" src="https:&#x2F;&#x2F;eastfisher.github.io&#x2F;blg&#x2F;even.js" ></script>
      
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>

    </body>

</html>
